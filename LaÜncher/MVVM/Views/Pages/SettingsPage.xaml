<UserControl x:Class="USoftware_HUb.MVVM.Views.Pages.SettingsPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:USoftware_HUb.MVVM.Views.Pages"
             xmlns:converters="clr-namespace:USoftwareHUB.Converters;assembly=USoftwareHUB"
             xmlns:viewModel="clr-namespace:USoftware_HUb.MVVM.ViewModel.Pages"
             xmlns:model="clr-namespace:USoftwareHUB.Models;assembly=USoftwareHUB"
             xmlns:sys="clr-namespace:System;assembly=mscorlib">

    <UserControl.Resources>
        <converters:TagColorConverter x:Key="TagColorConverter"/>
        <converters:TagFilterMultiCheckConverter x:Key="TagFilterMultiCheckConverter"/>
        <DropShadowEffect x:Key="SubtleDropShadow"
                  BlurRadius="8"
                  ShadowDepth="2"
                  Color="#66000000"/>
        <ObjectDataProvider x:Key="LogTagTypes"
                    MethodName="GetValues"
                    ObjectType="{x:Type sys:Enum}">
            <ObjectDataProvider.MethodParameters>
                <x:Type TypeName="model:LogTagType"/>
            </ObjectDataProvider.MethodParameters>
        </ObjectDataProvider>

    </UserControl.Resources>


    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="10*"/>
            <ColumnDefinition Width="40*"/>
            <ColumnDefinition Width="40*"/>
            <ColumnDefinition Width="10*"/>
        </Grid.ColumnDefinitions>

        <Grid Grid.Column="1" Margin="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <TextBlock Grid.Row="0" Text="Ustawienia HÜB" Style="{StaticResource HelpH1TextBlock}" Margin="5"/>

            <StackPanel Grid.Row="1" Margin="5">
                <TextBlock Text="Język aplikacji: (WIP)" Foreground="White"/>
                <ComboBox Width="200">
                    <ComboBoxItem Content="Polski"/>
                    <ComboBoxItem Content="English"/>
                    <ComboBoxItem Content="Deutsch"/>
                </ComboBox>
            </StackPanel>

            <StackPanel Grid.Row="2" Margin="5">
                <TextBlock Text="Zachowanie przy zamykaniu: (WIP)" Foreground="White"/>
                <ComboBox Width="200">
                    <ComboBoxItem Content="Zamknij aplikację"/>
                    <ComboBoxItem Content="Minimalizuj do tray"/>
                </ComboBox>
            </StackPanel>

            <CheckBox Grid.Row="3" Content="Uruchamiaj HÜB przy starcie systemu" Foreground="White" IsEnabled="False" Margin="5"/>

            <StackPanel Grid.Row="4" Margin="3">
                <TextBlock Text="Motyw aplikacji: (WIP)" Foreground="White"/>
                <ComboBox Width="200">
                    <ComboBoxItem Content="Systemowy"/>
                    <ComboBoxItem Content="Jasny"/>
                    <ComboBoxItem Content="Ciemny"/>
                </ComboBox>
            </StackPanel>

            <Button Grid.Row="5" Content="Zapisz ustawienia" Style="{StaticResource MainWideButtonStyle}" Width="150"  Margin="5"/>
        </Grid>


        <Grid Grid.Column="2" Margin="20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="auto"/>
                    <RowDefinition Height="auto"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0"
                           Text="Konsola logów"
                           Style="{StaticResource HelpH1TextBlock}"
                           Margin="0,0,0,10"/>

                <ListView Grid.Row="1"
                          MinHeight="400"
                          ItemsSource="{Binding FilteredLogs}"
                          Style="{StaticResource DashboardListView}"
                          ScrollViewer.VerticalScrollBarVisibility="Hidden"
                          HorizontalContentAlignment="Stretch">
                    <ListView.ItemTemplate>
                        <DataTemplate DataType="{x:Type model:LogItem}">
                            <Border Background="#2A2D3E"
                                    CornerRadius="6"
                                    Padding="10"
                                    Margin="5,1"
                                    Effect="{StaticResource SubtleDropShadow}">
                                <StackPanel>
                                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,0,5">
                                        <Border Background="{Binding TagType, Converter={StaticResource TagColorConverter}}"
                                                CornerRadius="4"
                                                Padding="6,2"
                                                MinWidth="60"
                                                HorizontalAlignment="Left">
                                            <TextBlock Text="{Binding TagType}"
                                                       Foreground="White"
                                                       FontWeight="SemiBold"
                                                       FontSize="12"
                                                       TextAlignment="Center"/>
                                        </Border>

                                        <TextBlock Text="{Binding Time}"
                                                   Foreground="LightGray"
                                                   FontSize="11"
                                                   Margin="10,0,0,0"
                                                   VerticalAlignment="Center"/>
                                    </StackPanel>

                                    <TextBlock Text="{Binding Descryption}"
                                               Foreground="White"
                                               FontSize="13"
                                               TextWrapping="Wrap"
                                               Margin="0,0,0,3"/>

                                    <TextBlock Text="{Binding Caller}"
                                               FontSize="10"
                                               Foreground="Gray"
                                               Margin="0,2,0,0"/>
                                </StackPanel>
                            </Border>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

                <Grid Grid.Row="2">
                    <Grid.RowDefinitions>
                        <RowDefinition/>
                        <RowDefinition Height="auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0"
                               Text="Filtry:"
                               Foreground="White"
                               FontFamily="Bahnschrift"
                               Margin="2,4"/>

                    <ItemsControl Grid.Row="1"
                                  ItemsSource="{Binding Source={StaticResource LogTagTypes}}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <ToggleButton Content="{Binding}"
                                              Background="{Binding Converter={StaticResource TagColorConverter}}"
                                              Style="{StaticResource TagButtonLog}"
                                              Command="{Binding DataContext.ToggleFilterCommand, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                              CommandParameter="{Binding}"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </Grid>

                <Grid Grid.Row="3" HorizontalAlignment="Center">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="auto"/>
                        <ColumnDefinition Width="auto"/>
                    </Grid.ColumnDefinitions>

                    <Button Grid.Column="0"
                            Content="Wyczyść logi"
                            Style="{StaticResource WideButtonStyle}"
                            Margin="5,10"/>

                    <Button Grid.Column="1"
                            Content="Pokaż logi"
                            Style="{StaticResource WideButtonStyle}"
                            Margin="5,10"/>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</UserControl>
